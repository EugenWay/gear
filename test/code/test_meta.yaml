title: meta

programs:
  - id: 1
    path: examples/target/wasm32-unknown-unknown/release/demo_meta.wasm
    meta: examples/target/wasm32-unknown-unknown/release/demo_meta.meta.wasm
    init_message:
      kind: custom
      value: { "value": 1, "annotation": "hello" }

fixtures:
  - title: meta
    messages:
      - destination: 1
        payload:
          kind: custom
          value: { "value": 2, "annotation": "handle" }
    expected:
      - step: 1
        messages:
          - destination: 0
            payload:
              kind: custom
              value: { "old_value": 1, "new_value": 2 }
              program_meta: 1
